<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>HashDictionary | LuXuanyu</title><meta name="keywords" content="C"><meta name="author" content="Xuanyu Lu"><meta name="copyright" content="Xuanyu Lu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Using LInkedList and Hashmap to create a dictionaryLately I was revising the LinkedList and Hashmap, I was thinking about the usage of them. The first idea my brain generates is the dictionary. It has">
<meta property="og:type" content="article">
<meta property="og:title" content="HashDictionary">
<meta property="og:url" content="https://william-lu-stack.github.io/2021/03/04/hashDictionary/index.html">
<meta property="og:site_name" content="LuXuanyu">
<meta property="og:description" content="Using LInkedList and Hashmap to create a dictionaryLately I was revising the LinkedList and Hashmap, I was thinking about the usage of them. The first idea my brain generates is the dictionary. It has">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png">
<meta property="article:published_time" content="2021-03-04T06:17:06.968Z">
<meta property="article:modified_time" content="2021-03-04T06:52:48.324Z">
<meta property="article:author" content="Xuanyu Lu">
<meta property="article:tag" content="C">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://william-lu-stack.github.io/2021/03/04/hashDictionary/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="yandex-verification" content="{&quot;theme_color&quot;:{&quot;enable&quot;:true,&quot;main&quot;:&quot;#49B1F5&quot;,&quot;paginator&quot;:&quot;#00c4b6&quot;,&quot;button_hover&quot;:&quot;#FF7242&quot;,&quot;text_selection&quot;:&quot;#00c4b6&quot;,&quot;link_color&quot;:&quot;#99a9bf&quot;,&quot;meta_color&quot;:&quot;#858585&quot;,&quot;hr_color&quot;:&quot;#A4D8FA&quot;,&quot;code_foreground&quot;:&quot;#F47466&quot;,&quot;code_background&quot;:&quot;rgba(27, 31, 35, .05)&quot;,&quot;toc_color&quot;:&quot;#00c4b6&quot;,&quot;blockquote_padding_color&quot;:&quot;#49b1f5&quot;,&quot;blockquote_background_color&quot;:&quot;#49b1f5&quot;}}"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: '',
  enable_page_level_ads: 'true'
});</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":50,"languages":{"author":"Author: Xuanyu Lu","link":"Link: ","source":"Source: LuXuanyu","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-03-04 14:52:48'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="/img/icon"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">8</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">3</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">LuXuanyu</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">HashDictionary</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-categories"><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/project/">project</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">1.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>7min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="Using-LInkedList-and-Hashmap-to-create-a-dictionary"><a href="#Using-LInkedList-and-Hashmap-to-create-a-dictionary" class="headerlink" title="Using LInkedList and Hashmap to create a dictionary"></a>Using LInkedList and Hashmap to create a dictionary</h2><p>Lately I was revising the LinkedList and Hashmap, I was thinking about the usage of them. The first idea my brain generates is the dictionary. It has root node(e.g Using order of Alphabet to sort the first letter), and has pointer point to the next node(e.g the next letter will point the direction). Hashmap could be used to decide the rules of ordering dictionary.</p>
<h2 id="Initiate-the-node-and-the-hash-table"><a href="#Initiate-the-node-and-the-hash-table" class="headerlink" title="Initiate the node and the hash table"></a>Initiate the node and the hash table</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">typedef struct node</span><br><span class="line">&#123;</span><br><span class="line">    char word[LENGTH + 1];</span><br><span class="line">    struct node *next;</span><br><span class="line">&#125;</span><br><span class="line">node;</span><br><span class="line">&#x2F;&#x2F; Number of buckets in hash table</span><br><span class="line">const unsigned int N &#x3D; 65535;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Hash table</span><br><span class="line">node *table[N];</span><br></pre></td></tr></table></figure>
<p>This represents a node in a hash table and the hash table.</p>
<h2 id="Write-a-function-to-check-whether-the-word-you-search-is-in-the-dictionary"><a href="#Write-a-function-to-check-whether-the-word-you-search-is-in-the-dictionary" class="headerlink" title="Write a function to check whether the word you search is in the dictionary"></a>Write a function to check whether the word you search is in the dictionary</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bool check(const char *word)</span><br><span class="line">&#123;</span><br><span class="line">      </span><br><span class="line">    node *tmp &#x3D; table[hash(word)];</span><br><span class="line">    while (tmp !&#x3D; NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        if (strcasecmp(word, tmp-&gt;word) &#x3D;&#x3D; 0)</span><br><span class="line">        &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            tmp &#x3D; tmp-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Returns true if word is in dictionary else false.</p>
<h2 id="Hashes-the-word-put-in-the-dictionary"><a href="#Hashes-the-word-put-in-the-dictionary" class="headerlink" title="Hashes the word put in the dictionary"></a>Hashes the word put in the dictionary</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">unsigned int hash(const char *word)</span><br><span class="line">&#123;</span><br><span class="line">    unsigned int index &#x3D; 0;</span><br><span class="line">    for (int i &#x3D; 0, n &#x3D; strlen(word); i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        index +&#x3D; tolower(word[i]) - &#39;a&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">    return index % N;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The method I hash is to first transfer all the letters in the word to lower case and use ASCII number to calculate the index return. The N is a number which I select it as 65535.</p>
<h2 id="Loads-dictionary-into-memory"><a href="#Loads-dictionary-into-memory" class="headerlink" title="Loads dictionary into memory"></a>Loads dictionary into memory</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bool load(const char *dictionary)</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F;read dictionary into a new variable</span><br><span class="line">    FILE *dic &#x3D; fopen(dictionary, &quot;r&quot;);</span><br><span class="line">    &#x2F;&#x2F;case cannot read</span><br><span class="line">    if (dic &#x3D;&#x3D; NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    char tmp_word[LENGTH + 1];</span><br><span class="line">    </span><br><span class="line">    while (fscanf(dic, &quot;%s&quot;, tmp_word) !&#x3D; EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        unsigned int index &#x3D; hash(tmp_word);</span><br><span class="line">        </span><br><span class="line">        node *new_node &#x3D; malloc(sizeof(node));</span><br><span class="line">        </span><br><span class="line">        new_node-&gt;next &#x3D; NULL;</span><br><span class="line">        </span><br><span class="line">        if(new_node &#x3D;&#x3D; NULL)</span><br><span class="line">        &#123;</span><br><span class="line">            unload();</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        strcpy(new_node-&gt;word, tmp_word);</span><br><span class="line">        </span><br><span class="line">        if (table[index] &#x3D;&#x3D; NULL)</span><br><span class="line">        &#123;</span><br><span class="line">            table[index] &#x3D; new_node;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            new_node-&gt;next &#x3D; table[index];</span><br><span class="line">            table[index] &#x3D; new_node;</span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line">        counter++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">      </span><br><span class="line">    fclose(dic);</span><br><span class="line">    return true;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Returning true if successful else false. The details in the annotations.</p>
<h2 id="Returns-number-of-words-in-dictionary-if-loaded-else-0-if-not-yet-loaded"><a href="#Returns-number-of-words-in-dictionary-if-loaded-else-0-if-not-yet-loaded" class="headerlink" title="Returns number of words in dictionary if loaded else 0 if not yet loaded"></a>Returns number of words in dictionary if loaded else 0 if not yet loaded</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">unsigned int size(void)</span><br><span class="line">&#123;</span><br><span class="line">    return counter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Unloads-dictionary-from-memory-returning-true-if-successful-else-false"><a href="#Unloads-dictionary-from-memory-returning-true-if-successful-else-false" class="headerlink" title="Unloads dictionary from memory, returning true if successful else false"></a>Unloads dictionary from memory, returning true if successful else false</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bool unload(void)</span><br><span class="line">&#123;   </span><br><span class="line">    node *cursor &#x3D; table[0];</span><br><span class="line">    </span><br><span class="line">    for (int i &#x3D; 0; i &lt; N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cursor &#x3D; table[i];</span><br><span class="line">        </span><br><span class="line">        while (cursor !&#x3D; NULL)</span><br><span class="line">        &#123;</span><br><span class="line">            node *tmp &#x3D; cursor;</span><br><span class="line">            cursor &#x3D; cursor-&gt;next;</span><br><span class="line">            free(tmp);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    if (cursor &#x3D;&#x3D; NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="By-now-most-the-function-needed-for-a-dictionary-has-been-initiated-I-can-implement-the-main-function"><a href="#By-now-most-the-function-needed-for-a-dictionary-has-been-initiated-I-can-implement-the-main-function" class="headerlink" title="By now most the function needed for a dictionary has been initiated, I can implement the main function"></a>By now most the function needed for a dictionary has been initiated, I can implement the main function</h2><p>Try to find some words and gather them into a txt file. Using this programme to test whether it hashes and has root nodes. The main function below will show the words misspelled, the number of words in this dictionary, the words in text and the time take for each function above.<br>Btw, to calculate the time consumption, use the calculate function below</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">double calculate(const struct rusage *b, const struct rusage *a)</span><br><span class="line">&#123;</span><br><span class="line">    if (b &#x3D;&#x3D; NULL || a &#x3D;&#x3D; NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        return 0.0;</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">        return ((((a-&gt;ru_utime.tv_sec * 1000000 + a-&gt;ru_utime.tv_usec) -</span><br><span class="line">                  (b-&gt;ru_utime.tv_sec * 1000000 + b-&gt;ru_utime.tv_usec)) +</span><br><span class="line">                 ((a-&gt;ru_stime.tv_sec * 1000000 + a-&gt;ru_stime.tv_usec) -</span><br><span class="line">                  (b-&gt;ru_stime.tv_sec * 1000000 + b-&gt;ru_stime.tv_usec)))</span><br><span class="line">                &#x2F; 1000000.0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Returns number of seconds between b and a.</p>
<p>The main function is below</p>
<pre><code class="CODE">int main(int argc, char *argv[])
&#123;
    // Check for correct number of args
    if (argc != 2 &amp;&amp; argc != 3)
    &#123;
        printf(&quot;Usage: ./speller [DICTIONARY] text\n&quot;);
        return 1;
    &#125;

    // Structures for timing data
    struct rusage before, after;

    // Benchmarks
    double time_load = 0.0, time_check = 0.0, time_size = 0.0, time_unload = 0.0;

    // Determine dictionary to use
    char *dictionary = (argc == 3) ? argv[1] : DICTIONARY;

    // Load dictionary
    getrusage(RUSAGE_SELF, &amp;before);
    bool loaded = load(dictionary);
    getrusage(RUSAGE_SELF, &amp;after);

    // Exit if dictionary not loaded
    if (!loaded)
    &#123;
        printf(&quot;Could not load %s.\n&quot;, dictionary);
        return 1;
    &#125;

    // Calculate time to load dictionary
    time_load = calculate(&amp;before, &amp;after);

    // Try to open text
    char *text = (argc == 3) ? argv[2] : argv[1];
    FILE *file = fopen(text, &quot;r&quot;);
    if (file == NULL)
    &#123;
        printf(&quot;Could not open %s.\n&quot;, text);
        unload();
        return 1;
    &#125;

    // Prepare to report misspellings
    printf(&quot;\nMISSPELLED WORDS\n\n&quot;);

    // Prepare to spell-check
    int index = 0, misspellings = 0, words = 0;
    char word[LENGTH + 1];

    // Spell-check each word in text
    for (int c = fgetc(file); c != EOF; c = fgetc(file))
    &#123;
        // Allow only alphabetical characters and apostrophes
        if (isalpha(c) || (c == &#39;\&#39;&#39; &amp;&amp; index &gt; 0))
        &#123;
            // Append character to word
            word[index] = c;
            index++;

            // Ignore alphabetical strings too long to be words
            if (index &gt; LENGTH)
            &#123;
                // Consume remainder of alphabetical string
                while ((c = fgetc(file)) != EOF &amp;&amp; isalpha(c));

                // Prepare for new word
                index = 0;
            &#125;
        &#125;

        // Ignore words with numbers (like MS Word can)
        else if (isdigit(c))
        &#123;
            // Consume remainder of alphanumeric string
            while ((c = fgetc(file)) != EOF &amp;&amp; isalnum(c));

            // Prepare for new word
            index = 0;
        &#125;

        // We must have found a whole word
        else if (index &gt; 0)
        &#123;
            // Terminate current word
            word[index] = &#39;\0&#39;;

            // Update counter
            words++;

            // Check word&#39;s spelling
            getrusage(RUSAGE_SELF, &amp;before);
            bool misspelled = !check(word);
            getrusage(RUSAGE_SELF, &amp;after);

            // Update benchmark
            time_check += calculate(&amp;before, &amp;after);

            // Print word if misspelled
            if (misspelled)
            &#123;
                printf(&quot;%s\n&quot;, word);
                misspellings++;
            &#125;

            // Prepare for next word
            index = 0;
        &#125;
    &#125;

    // Check whether there was an error
    if (ferror(file))
    &#123;
        fclose(file);
        printf(&quot;Error reading %s.\n&quot;, text);
        unload();
        return 1;
    &#125;

    // Close text
    fclose(file);

    // Determine dictionary&#39;s size
    getrusage(RUSAGE_SELF, &amp;before);
    unsigned int n = size();
    getrusage(RUSAGE_SELF, &amp;after);

    // Calculate time to determine dictionary&#39;s size
    time_size = calculate(&amp;before, &amp;after);

    // Unload dictionary
    getrusage(RUSAGE_SELF, &amp;before);
    bool unloaded = unload();
    getrusage(RUSAGE_SELF, &amp;after);

    // Abort if dictionary not unloaded
    if (!unloaded)
    &#123;
        printf(&quot;Could not unload %s.\n&quot;, dictionary);
        return 1;
    &#125;

    // Calculate time to unload dictionary
    time_unload = calculate(&amp;before, &amp;after);

    // Report benchmarks
    printf(&quot;\nWORDS MISSPELLED:     %d\n&quot;, misspellings);
    printf(&quot;WORDS IN DICTIONARY:  %d\n&quot;, n);
    printf(&quot;WORDS IN TEXT:        %d\n&quot;, words);
    printf(&quot;TIME IN load:         %.2f\n&quot;, time_load);
    printf(&quot;TIME IN check:        %.2f\n&quot;, time_check);
    printf(&quot;TIME IN size:         %.2f\n&quot;, time_size);
    printf(&quot;TIME IN unload:       %.2f\n&quot;, time_unload);
    printf(&quot;TIME IN TOTAL:        %.2f\n\n&quot;,
           time_load + time_check + time_size + time_unload);

    // Success
    return 0;
&#125;
Done!
</code></pre>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Xuanyu Lu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://william-lu-stack.github.io/2021/03/04/hashDictionary/">https://william-lu-stack.github.io/2021/03/04/hashDictionary/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C/">C</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> Donate</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/03/04/fakegram/"><img class="prev-cover" data-lazy-src="https://th.bing.com/th/id/R520b1f4596a8452b8f6d7c31577c0817?rik=zSGL9zeMmaRQ5g&amp;riu=http%3a%2f%2ffile06.16sucai.com%2f2016%2f0926%2f59bae37662e8f718957d0d8692306317.jpg&amp;ehk=mmFQgrXhn%2b5NrsEzgpa035wVCSd4%2fZaXV0fxQkFhIR0%3d&amp;risl=&amp;pid=ImgRaw" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">fakegram</div></div></a></div><div class="next-post pull-right"><a href="/2021/03/04/Pokemon/"><img class="next-cover" data-lazy-src="http://i3.sinaimg.cn/ast/2012/0910/U5593P54DT20120910151702.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Pokemon</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2021/02/28/imageP/" title="Filter(Edition)"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-28</div><div class="title">Filter(Edition)</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Xuanyu Lu</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">8</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">3</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/William-Lu-stack"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/William-Lu-stack" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:luxuanyuwilliam@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Using-LInkedList-and-Hashmap-to-create-a-dictionary"><span class="toc-number">1.</span> <span class="toc-text">Using LInkedList and Hashmap to create a dictionary</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Initiate-the-node-and-the-hash-table"><span class="toc-number">2.</span> <span class="toc-text">Initiate the node and the hash table</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Write-a-function-to-check-whether-the-word-you-search-is-in-the-dictionary"><span class="toc-number">3.</span> <span class="toc-text">Write a function to check whether the word you search is in the dictionary</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hashes-the-word-put-in-the-dictionary"><span class="toc-number">4.</span> <span class="toc-text">Hashes the word put in the dictionary</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Loads-dictionary-into-memory"><span class="toc-number">5.</span> <span class="toc-text">Loads dictionary into memory</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Returns-number-of-words-in-dictionary-if-loaded-else-0-if-not-yet-loaded"><span class="toc-number">6.</span> <span class="toc-text">Returns number of words in dictionary if loaded else 0 if not yet loaded</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Unloads-dictionary-from-memory-returning-true-if-successful-else-false"><span class="toc-number">7.</span> <span class="toc-text">Unloads dictionary from memory, returning true if successful else false</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#By-now-most-the-function-needed-for-a-dictionary-has-been-initiated-I-can-implement-the-main-function"><span class="toc-number">8.</span> <span class="toc-text">By now most the function needed for a dictionary has been initiated, I can implement the main function</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png')"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By Xuanyu Lu</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi,I'm Lu, welcome to my <a href="https://William-Lu-stack.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="Increase font size"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="Decrease font size"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">2</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>